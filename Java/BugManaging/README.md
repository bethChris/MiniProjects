# Bug Manager
This is the start of a small bug managing application. The goal of this is to refresh myself on a variety of concepts but focus on SQL basics, API creation, and Java applications.

## Project Outline
- We'll have a basic database that contains simulated data of users, the bugs they've reported, and various other meta data about the reports
- This database will then be accessed via a small API system that will just be able to retrieve the reports and send them to our application.
- Then we'll have a java application that will interact with the API and retrieve the information, displaying it to the user.


# Prerequisites
Note I use Windows. Installing and running this project on other operating systems may take some *finagling*.

Each Section will outline detailed needs to get that respective part up and running, however, here's the general list of languages and tools you'll need so that you know what you're getting yourself into:

- [Python 3.xx ](https://www.python.org/about/gettingstarted/) (I used 3.11.0)
- [SQL Server Management Studio](https://learn.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver16)
- [ODBC Driver for SQL Server](https://learn.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server?view=sql-server-ver16)
- [Java](https://www.java.com/download/ie_manual.jsp) (I used Java 22)
- [Gradle](https://gradle.org/install/) (I used 7.6)

All of this was done in [Visual Studio Code](https://code.visualstudio.com/), however it can be done in your preferred IDE/project framework.
# Database
A high-level overview of the simple database I aim to implement is given below:

**Name**: BugReports

**Tables**: Users, Reports, Bugs

### Users:
    - UserId : int
    - FirstName : char
    - LastName : char

### Reports:
    - ReportId : int
    - BugId : int
    - UserId : int
    - ReportDescr : text
    - ReportDate : date
    - ResolvedDate : date

### Bugs:
    - BugId : int
    - TextDescr : text
    - Severity : int

These individual tables are included in the `data\` directory of this project.

The data used for this project is **fake, ai-generated data** courtesy of ChatGPT. I defined the structure, loaded the values for each column generated by ChatGPT into excel sheets, saved the tables as CSVs and loaded them into my SQL database.

## Database Setup
I recommend this tutorial for getting setup and creating your first database: [SQL Server Tutorial For Beginners](https://www.youtube.com/watch?v=-EPMOaV7h_Q)

### Install
- [SQL Server Management Studio](https://learn.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver16)
- [ODBC Driver for SQL Server](https://learn.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server?view=sql-server-ver16)


## Import Project Data
The data for this project is provided in `data\` as CSV files. You can load these into your own database using [this tutorial on importing CSV files into SQL](https://www.sqlshack.com/importing-and-working-with-csv-files-in-sql-server/). 

> **NOTE**: you can totally use your own data as well, however keep in mind the endpoint logic in `backend\driver.py` will need to modified as it includes table-specific queires that may not match your database structure.

# Backend
This backend is the API for connecting the database to the frontend/app. It currently has one endpoint (`/reports`) used to query all reports in the database and return them as a JSON object.

## Backend Setup
This project requires setup of an SQL database (with credentials), python, and a couple of python packages.

### Packages
I suggest creating a virtual environment. [Python Docs: Creation of Virual Environments](https://docs.python.org/3/library/venv.html). 
The following packages needed are:
- Flask
- Pyodoc

To install the required Python packages, you can use the following pip terminal command:
```bash
$ pip install flask pyodoc
```

### Database Credentials
To connect this projects code to your own SQL database, you will need to create a file called `api.txt` in the `backend\` directory. Copy the information in `api-template.txt` and replace the bracketed information with your own values, removing the brackets as well. The `api.txt` file is read into `driver.py` at the beginning to setup the connection to your database. 

>**NOTE**: I utilized the "Trusted_Connection" attribute to connect via Windows Authentication, but you can use username/password attributes if you prefer. [Pyodoc w/ SQL Tutorial](https://learn.microsoft.com/en-us/sql/connect/python/pyodbc/step-3-proof-of-concept-connecting-to-sql-using-pyodbc?view=sql-server-ver16)

The format I used is as follows:
```
DRIVER=[odbc-driver-version];
SERVER=[server-address];
DATABASE=[database-name];
Trusted_Connection=yes;
```

My driver version is "ODBC Driver 17 for SQL Server", yours may be different. Be sure to check under the `drivers` tab of your own installment of ODBC for what version you have.


## Running the Backend
Navigate into the `backend\` directory, and run the following command:

```bash
$ python driver.py
```

This will start a development server. 

Visit http://localhost:5000/reports to see the returned json object of all reports in your database. 

# Frontend
This will be the application that displays the information queired from the API. It currently consists of a simple GUI created with Swing.

## Frontend Setup
This requires Java and Gradle to run. (See [prerequisites](#prerequisites))

### Dependencies
The dependencies are listed in the `build.gradle` file so by downloading this project you should already have that. However, here is a breakdown of what those dependencies are:

- **org.junit.jupiter:junit-jupiter:5.9.1** : used to create unit tests in the `\test` directory (comes with Gradle init task setup)

- **com.fasterxml.jackson.core\*** : all used to convert JSON objects into defined Java objects. Used in `Utils.java` in the `\main` directory

### Endpoint Setup
This project currently only supports one endpoint (http://localhost:5000/reports). If you changed this endpoing in the API, it will need to be updated in `Utils.java` as well: 

```java
 public static final String USER_API = "http://localhost:5000/reports";
```

## Custom Objects
I utilized the ObjectMapper class to turn the JSON object from the API into my own record in `Report.java`. Because of this, the functions called on in `Utils.java` are specific to the Report data structure (for now). 

>**NOTE**: if you wish to change this to fit your own needs, you'll have to create a custom record yourself (based on the JSON object your API returns) and then change that reference in `Utils.java` 

## Running the Frontend
To run the frontend, ensure your API is in working order as this application currently requires it to be working to pass the tests. I will eventually add more elegant error handling.

### With Terminal (my preferred)
Navigate to the `\frontend` directory and run the following command:

```bash
$ ./gradlew build
```
Hopefully all should be working properly and the build completes. Then run:

```bash
$ ./gradlew run
```
Wala. It is run.

### With Visual Studio
With the code in the `\src\main` directory open, hit **Run**

(This may require adding some Java debugger/compiling extensions)

# Resources
Helpful tips, tricks, videos, and documentation used during this project.

## SQL
[Download SQL Server Management Studio](https://learn.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver16)

[Download ODBC Driver for SQL Server](https://learn.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server?view=sql-server-ver16)

[SQL Sever Tutorial For Beginners](https://www.youtube.com/watch?v=-EPMOaV7h_Q)

[Importing CSV Into SQL](https://www.sqlshack.com/importing-and-working-with-csv-files-in-sql-server/)

[Generated Sample Data (ChatGPT)](https://chatgpt.com/)

[SQL Syntax](https://learn.microsoft.com/en-us/sql/?view=sql-server-ver16)

## Python API

[Connecting SQL to Python API](https://learn.microsoft.com/en-us/sql/connect/python/pyodbc/python-sql-driver-pyodbc?view=sql-server-ver16)

[Flask Quickstart Guide](https://flask.palletsprojects.com/en/3.0.x/quickstart/)

[Example Flask w/ Pyodoc Server](https://github.com/devashishupadhyay/Sql-Server-Flask)


## Java Application

[Java HTTPClient Docs](https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html)

[Java ObjectMapper Docs](https://javadoc.io/doc/com.fasterxml.jackson.core/jackson-databind/2.9.8/com/fasterxml/jackson/databind/ObjectMapper.html)

[Using ObjectMapper to go from JSON to Java Object](https://www.baeldung.com/jackson-object-mapper-tutorial)

[Creating GUIs With Swing](https://www.guru99.com/java-swing-gui.html)

[Swing Documentation](https://docs.oracle.com/javase/8/docs/api/javax/swing/package-summary.html)

[Asyncronous API Calls w/ SwingWorkers](https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingWorker.html)

## Misc
[Python Docs: Creation of Virual Environments](https://docs.python.org/3/library/venv.html).

[Humbled by Curly Braces](https://stackoverflow.com/questions/20837856/can-not-deserialize-instance-of-java-util-arraylist-out-of-start-object-token)